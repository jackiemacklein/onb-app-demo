{"version":3,"sources":["utils/api.jsx","pages/AuthSignIn/content.jsx"],"names":["api","axios","create","baseURL","interceptors","request","use","config","headers","Cookies","get","error","Promise","reject","Content","props","state","email","emailError","password","passwordError","loading","checkEmail","bind","checkPassword","maybeLogin","this","isValid","isValidEmail","setState","length","updateAuth","updateSettings","post","data","token","user_id","user","id","user_name","name","user_email","filial_id","filial","filial_name","user_image_path","image_path","profile_id","profile","profile_name","sales_cancel","console","log","response","status","className","type","classnames","aria-describedby","placeholder","value","onChange","e","target","onBlur","disabled","onClick","Component","connect","auth","settings","actionUpdateAuth","actionUpdateSettings"],"mappings":"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","file":"static/js/57.5b7dd199.chunk.js","sourcesContent":["import axios from \"axios\";\nimport Cookies from \"js-cookie\";\n\nconst api = axios.create({ baseURL: \"https://onb-api-demo.agenciaonside.com.br\" });\n//const api = axios.create({ baseURL: \"http://192.168.1.5:8080\" });\n\napi.interceptors.request.use(\n  config => {\n    config.headers[\"Authorization\"] = \"bearer \" + Cookies.get(\"rui-auth-token\");\n    return config;\n  },\n  error => {\n    Promise.reject(error);\n  },\n);\n\nexport default api;\n","/**\n * External Dependencies\n */\nimport React, { Component, Fragment } from \"react\";\nimport classnames from \"classnames/dedupe\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { Spinner } from \"reactstrap\";\n\n/**\n * Internal Dependencies\n */\nimport Icon from \"../../components/icon\";\nimport { isValidEmail } from \"../../utils\";\nimport api from \"./../../utils/api\";\n\nimport { updateAuth as actionUpdateAuth, updateSettings as actionUpdateSettings } from \"../../actions\";\n\n/**\n * Component\n */\nclass Content extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: \"tech@agenciaonside.com.br\",\n      emailError: \"\",\n      password: `tech@@on@agencia@#2020`,\n      passwordError: \"\",\n      loading: false,\n    };\n\n    this.checkEmail = this.checkEmail.bind(this);\n    this.checkPassword = this.checkPassword.bind(this);\n    this.maybeLogin = this.maybeLogin.bind(this);\n  }\n\n  checkEmail() {\n    const { email } = this.state;\n\n    const isValid = email && isValidEmail(email);\n\n    this.setState({\n      emailError: isValid ? \"\" : \"Formato de email inválido\",\n    });\n\n    //return isValid;\n    return true;\n  }\n\n  checkPassword() {\n    const { password } = this.state;\n\n    const isValid = password && password.length >= 3;\n\n    this.setState({\n      passwordError: isValid ? \"\" : \"A senha deve ter pelo menos 6 caracteres\",\n    });\n\n    return isValid;\n  }\n\n  async maybeLogin() {\n    const { updateAuth, updateSettings } = this.props;\n\n    if (this.state.loading) {\n      return;\n    }\n\n    let isValid = true;\n    isValid = this.checkEmail() && isValid;\n    isValid = this.checkPassword() && isValid;\n\n    // Form is not valid.\n    if (!isValid) {\n      return;\n    }\n\n    this.setState({\n      loading: true,\n    });\n\n    // async () => {\n    try {\n      const { data } = await api.post(\"/sessions\", { email: this.state.email, password: this.state.password });\n      if (data) {\n        //updateSettings({ users: [{ img: data?.user?.image_path, img_profile: data?.user?.image_path, name: data?.user?.name }] });\n\n        updateAuth({\n          token: data.token,\n          user_id: data?.user?.id,\n          user_name: data?.user?.name,\n          user_email: data?.user?.email,\n          filial_id: data?.user?.filial?.id,\n          filial_name: data?.user?.filial?.name,\n          user_image_path: data?.user?.image_path,\n          profile_id: data?.user?.profile?.id,\n          profile_name: data?.user?.profile?.name,\n          sales_cancel: data?.user?.sales_cancel,\n        });\n      }\n    } catch (error) {\n      console.log(error);\n\n      if (error?.response?.status === 401) {\n        this.setState({\n          loading: false,\n          passwordError: \"Usuário ou senha inválidos\",\n        });\n        return;\n      } else {\n        this.setState({\n          loading: false,\n          passwordError: \"Erro desconhecido! Tente novamente\",\n        });\n      }\n      // }\n\n      /* setTimeout(() => {\n          updateAuth({\n            token: \"fake-token\",\n          });\n        }, 600);*/\n    }\n  }\n\n  render() {\n    const { email, emailError, password, passwordError } = this.state;\n\n    return (\n      <Fragment>\n        <div className=\"bg-image\">\n          <div className=\"bg-grey-1\" />\n        </div>\n        <div className=\"form rui-sign-form rui-sign-form-cloud\">\n          <div className=\"row vertical-gap sm-gap justify-content-center\">\n            <div className=\"col-12\">\n              <h1 className=\"display-4 mb-10 text-center\">Login</h1>\n            </div>\n            <div className=\"col-12\">\n              <input\n                type=\"email\"\n                className={classnames(\"form-control\", { \"is-invalid\": emailError })}\n                aria-describedby=\"emailHelp\"\n                placeholder=\"Email\"\n                value={email}\n                onChange={e => {\n                  this.setState(\n                    {\n                      email: e.target.value,\n                    },\n                    emailError ? this.checkEmail : () => {},\n                  );\n                }}\n                onBlur={this.checkEmail}\n                disabled={this.state.loading}\n              />\n              {emailError ? <div className=\"invalid-feedback\">{emailError}</div> : \"\"}\n            </div>\n            <div className=\"col-12\">\n              <input\n                type=\"password\"\n                className={classnames(\"form-control\", { \"is-invalid\": passwordError })}\n                placeholder=\"Password\"\n                value={password}\n                onChange={e => {\n                  this.setState(\n                    {\n                      password: e.target.value,\n                    },\n                    passwordError ? this.checkPassword : () => {},\n                  );\n                }}\n                onBlur={this.checkPassword}\n                disabled={this.state.loading}\n              />\n              {passwordError ? <div className=\"invalid-feedback\">{passwordError}</div> : \"\"}\n            </div>\n            {/*<div className=\"col-sm-6\">\n              <div className=\"custom-control custom-checkbox d-flex justify-content-start\">\n                <input type=\"checkbox\" className=\"custom-control-input\" id=\"rememberMe\" disabled={this.state.loading} />\n                <label className=\"custom-control-label fs-13\" htmlFor=\"rememberMe\">\n                  Remember me\n                </label>\n            </div> \n            </div>\n            <div className=\"col-sm-6\">\n              <div className=\"d-flex justify-content-end\">\n                <Link to=\"#\" className=\"fs-13\">\n                  Forget password?\n                </Link>\n              </div>\n            </div>*/}\n            <div className=\"col-12\">\n              <button className=\"btn btn-brand btn-block text-center\" onClick={this.maybeLogin} disabled={this.state.loading}>\n                Entrar\n                {this.state.loading ? <Spinner /> : \"\"}\n              </button>\n            </div>\n            {/*\n            <div className=\"col-12\">\n              <div className=\"rui-sign-or mt-2 mb-5\">or</div>\n            </div>\n            <div className=\"col-12\">\n              <ul className=\"rui-social-links\">\n                <li>\n                  <button className=\"rui-social-github\" onClick={this.maybeLogin} disabled={this.state.loading}>\n                    <Icon vendor=\"fa\" name={[\"fab\", \"github\"]} />\n                    Github\n                  </button>\n                </li>\n                <li>\n                  <button className=\"rui-social-facebook\" onClick={this.maybeLogin} disabled={this.state.loading}>\n                    <Icon vendor=\"fa\" name={[\"fab\", \"facebook-f\"]} />\n                    Facebook\n                  </button>\n                </li>\n                <li>\n                  <button className=\"rui-social-google\" onClick={this.maybeLogin} disabled={this.state.loading}>\n                    <Icon vendor=\"fa\" name={[\"fab\", \"google\"]} />\n                    Google\n                  </button>\n                </li>\n              </ul>\n            </div>*/}\n          </div>\n        </div>\n        {/*\n        <div className=\"mt-20 text-grey-5\">\n          Don&apos;t you have an account?{\" \"}\n          <Link to=\"/sign-up\" className=\"text-2\">\n            Sign Up\n          </Link>\n        </div>\n        */}{\" \"}\n      </Fragment>\n    );\n  }\n}\n\nexport default connect(\n  ({ auth, settings }) => ({\n    auth,\n    settings,\n  }),\n  { updateAuth: actionUpdateAuth, updateSettings: actionUpdateSettings },\n)(Content);\n"],"sourceRoot":""}