(this["webpackJsonponb-app-demo.agenciaonside.com.br"]=this["webpackJsonponb-app-demo.agenciaonside.com.br"]||[]).push([[18],{235:function(e,t,a){"use strict";var n=a(242),i=a.n(n),r=a(18),l=a.n(r),s=i.a.create({baseURL:"https://onb-api-demo.agenciaonside.com.br"});s.interceptors.request.use((function(e){return e.headers.Authorization="bearer "+l.a.get("rui-auth-token"),e}),(function(e){Promise.reject(e)})),t.a=s},281:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(265),i=a(247),r={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,s=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,c=/^([+-])(\d{2})(?::?(\d{2}))?$/;function o(e,t){Object(i.a)(1,arguments);var a=t||{},r=null==a.additionalDigits?2:Object(n.a)(a.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!==typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var l,s=u(e);if(s.date){var c=m(s.date,r);l=d(c.restDateString,c.year)}if(isNaN(l)||!l)return new Date(NaN);var o,v=l.getTime(),p=0;if(s.time&&(p=f(s.time),isNaN(p)||null===p))return new Date(NaN);if(!s.timezone){var g=new Date(v+p),h=new Date(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate(),g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds());return h.setFullYear(g.getUTCFullYear()),h}return o=b(s.timezone),isNaN(o)?new Date(NaN):new Date(v+p+o)}function u(e){var t,a={},n=e.split(r.dateTimeDelimiter);if(n.length>2)return a;if(/:/.test(n[0])?(a.date=null,t=n[0]):(a.date=n[0],t=n[1],r.timeZoneDelimiter.test(a.date)&&(a.date=e.split(r.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){var i=r.timezone.exec(t);i?(a.time=t.replace(i[1],""),a.timezone=i[1]):a.time=t}return a}function m(e,t){var a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(a);if(!n)return{year:null};var i=n[1]&&parseInt(n[1]),r=n[2]&&parseInt(n[2]);return{year:null==r?i:100*r,restDateString:e.slice((n[1]||n[2]).length)}}function d(e,t){if(null===t)return null;var a=e.match(l);if(!a)return null;var n=!!a[4],i=v(a[1]),r=v(a[2])-1,s=v(a[3]),c=v(a[4]),o=v(a[5])-1;if(n)return function(e,t,a){return t>=1&&t<=53&&a>=0&&a<=6}(0,c,o)?function(e,t,a){var n=new Date(0);n.setUTCFullYear(e,0,4);var i=n.getUTCDay()||7,r=7*(t-1)+a+1-i;return n.setUTCDate(n.getUTCDate()+r),n}(t,c,o):new Date(NaN);var u=new Date(0);return function(e,t,a){return t>=0&&t<=11&&a>=1&&a<=(g[t]||(h(e)?29:28))}(t,r,s)&&function(e,t){return t>=1&&t<=(h(e)?366:365)}(t,i)?(u.setUTCFullYear(t,r,Math.max(i,s)),u):new Date(NaN)}function v(e){return e?parseInt(e):1}function f(e){var t=e.match(s);if(!t)return null;var a=p(t[1]),n=p(t[2]),i=p(t[3]);return function(e,t,a){if(24===e)return 0===t&&0===a;return a>=0&&a<60&&t>=0&&t<60&&e>=0&&e<25}(a,n,i)?36e5*a+6e4*n+1e3*i:NaN}function p(e){return e&&parseFloat(e.replace(",","."))||0}function b(e){if("Z"===e)return 0;var t=e.match(c);if(!t)return 0;var a="+"===t[1]?-1:1,n=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,i)?a*(36e5*n+6e4*i):NaN}var g=[31,null,31,30,31,30,31,31,30,31,30,31];function h(e){return e%400===0||e%4===0&&e%100}},286:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),i=a.n(n).a.createContext({})},445:function(e,t,a){"use strict";var n=a(2),i=a(3),r=a(5),l=a(4),s=a(0),c=a.n(s),o=a(15),u=a.n(o),m=a(473),d=a(474),v=a(475),f=a(476),p=a(477),b=a(7);window.RootUI.initTabsSliding=function(){function e(e,t){e.css({width:t.innerWidth(),height:t.outerHeight(),transform:"translate(".concat(t.position().left,"px, ").concat(t.position().top,"px)")})}function t(){Object(b.a)(".rui-tabs-sliding:not(.rui-tabs-sliding-ready)").addClass("rui-tabs-sliding-ready").each((function(){var t=Object(b.a)(this),a=Object(b.a)('<li class="rui-tabs-slide"></li>'),n=t.find(".rui-tabs-link.active");t.prepend(a),n.length&&e(a,n)}))}t(),b.d.on("rui-ajax-loaded",t),b.c.on("click",".rui-tabs-link",(function(t){t.preventDefault();var a=Object(b.a)(this),n=a.closest(".rui-tabs-sliding").find(".rui-tabs-slide");a.length&&e(n,a)}))},window.RootUI.initTabsSliding();var g=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.jQuery(window).trigger("rui-ajax-loaded")}},{key:"render",value:function(){var e=this.props,t=e.sliding,a=void 0!==t&&t,n=e.pills,i=void 0!==n&&n,r=e.children,l=e.className;return c.a.createElement(m.a,{className:u()(i?"nav-pills":"nav-tabs",a?"rui-tabs-sliding":"",l)},r)}}]),a}(s.Component),h=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.isActive,n=e.className,i=e.onClick;return c.a.createElement(d.a,null,c.a.createElement(v.a,{className:u()({active:a},"rui-tabs-link",n),onClick:i,href:"#"},t))}}]),a}(s.Component);g.NavItem=h,g.Content=f.a,g.Pane=p.a;t.a=g},473:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(0),l=a.n(r),s=a(1),c=a.n(s),o=a(12),u=a.n(o),m=a(6),d={tabs:c.a.bool,pills:c.a.bool,vertical:c.a.oneOfType([c.a.bool,c.a.string]),horizontal:c.a.string,justified:c.a.bool,fill:c.a.bool,navbar:c.a.bool,card:c.a.bool,tag:m.q,className:c.a.string,cssModule:c.a.object},v=function(e){var t=e.className,a=e.cssModule,r=e.tabs,s=e.pills,c=e.vertical,o=e.horizontal,d=e.justified,v=e.fill,f=e.navbar,p=e.card,b=e.tag,g=Object(i.a)(e,["className","cssModule","tabs","pills","vertical","horizontal","justified","fill","navbar","card","tag"]),h=Object(m.m)(u()(t,f?"navbar-nav":"nav",!!o&&"justify-content-"+o,function(e){return!1!==e&&(!0===e||"xs"===e?"flex-column":"flex-"+e+"-column")}(c),{"nav-tabs":r,"card-header-tabs":p&&r,"nav-pills":s,"card-header-pills":p&&s,"nav-justified":d,"nav-fill":v}),a);return l.a.createElement(b,Object(n.a)({},g,{className:h}))};v.propTypes=d,v.defaultProps={tag:"ul",vertical:!1},t.a=v},474:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(0),l=a.n(r),s=a(1),c=a.n(s),o=a(12),u=a.n(o),m=a(6),d={tag:m.q,active:c.a.bool,className:c.a.string,cssModule:c.a.object},v=function(e){var t=e.className,a=e.cssModule,r=e.active,s=e.tag,c=Object(i.a)(e,["className","cssModule","active","tag"]),o=Object(m.m)(u()(t,"nav-item",!!r&&"active"),a);return l.a.createElement(s,Object(n.a)({},c,{className:o}))};v.propTypes=d,v.defaultProps={tag:"li"},t.a=v},475:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(20),l=a(13),s=a(0),c=a.n(s),o=a(1),u=a.n(o),m=a(12),d=a.n(m),v=a(6),f={tag:v.q,innerRef:u.a.oneOfType([u.a.object,u.a.func,u.a.string]),disabled:u.a.bool,active:u.a.bool,className:u.a.string,cssModule:u.a.object,onClick:u.a.func,href:u.a.any},p=function(e){function t(t){var a;return(a=e.call(this,t)||this).onClick=a.onClick.bind(Object(r.a)(a)),a}Object(l.a)(t,e);var a=t.prototype;return a.onClick=function(e){this.props.disabled?e.preventDefault():("#"===this.props.href&&e.preventDefault(),this.props.onClick&&this.props.onClick(e))},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,r=e.active,l=e.tag,s=e.innerRef,o=Object(i.a)(e,["className","cssModule","active","tag","innerRef"]),u=Object(v.m)(d()(t,"nav-link",{disabled:o.disabled,active:r}),a);return c.a.createElement(l,Object(n.a)({},o,{ref:s,onClick:this.onClick,className:u}))},t}(c.a.Component);p.propTypes=f,p.defaultProps={tag:"a"},t.a=p},476:function(e,t,a){"use strict";var n=a(8),i=a(13),r=a(0),l=a.n(r),s=a(1),c=a.n(s),o=a(12),u=a.n(o),m=a(286),d=a(6),v={tag:d.q,activeTab:c.a.any,className:c.a.string,cssModule:c.a.object},f=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={activeTab:a.props.activeTab},a}return Object(i.a)(t,e),t.getDerivedStateFromProps=function(e,t){return t.activeTab!==e.activeTab?{activeTab:e.activeTab}:null},t.prototype.render=function(){var e=this.props,t=e.className,a=e.cssModule,i=e.tag,r=Object(d.n)(this.props,Object.keys(v)),s=Object(d.m)(u()("tab-content",t),a);return l.a.createElement(m.a.Provider,{value:{activeTabId:this.state.activeTab}},l.a.createElement(i,Object(n.a)({},r,{className:s})))},t}(r.Component);t.a=f,f.propTypes=v,f.defaultProps={tag:"div"}},477:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(8),i=a(9),r=a(0),l=a.n(r),s=a(1),c=a.n(s),o=a(12),u=a.n(o),m=a(286),d=a(6),v={tag:d.q,className:c.a.string,cssModule:c.a.object,tabId:c.a.any};function f(e){var t=e.className,a=e.cssModule,r=e.tabId,s=e.tag,c=Object(i.a)(e,["className","cssModule","tabId","tag"]),o=function(e){return Object(d.m)(u()("tab-pane",t,{active:r===e}),a)};return l.a.createElement(m.a.Consumer,null,(function(e){var t=e.activeTabId;return l.a.createElement(s,Object(n.a)({},c,{className:o(t)}))}))}f.propTypes=v,f.defaultProps={tag:"div"}},591:function(e,t,a){},592:function(e,t,a){},693:function(e,t,a){"use strict";a.r(t);var n=a(240),i=a.n(n),r=a(241),l=a(2),s=a(3),c=a(14),o=a(5),u=a(4),m=(a(591),a(0)),d=a.n(m),v=a(26),f=a(10),p=a(689),b=a(281),g=a(19),h=a(235),N=a(11),E=(a(105),a(445)),j=(a(592),a(15)),O=a.n(j),y=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.left,n=e.right,i=e.md,r=e.lg,l=e.xl,s=O()("rui-timeline",{"rui-timeline-left":a&&!n,"rui-timeline-right":n,"rui-timeline-right-md":"right"===i,"rui-timeline-left-md":"left"===i,"rui-timeline-right-lg":"right"===r,"rui-timeline-left-lg":"left"===r,"rui-timeline-right-xl":"right"===l,"rui-timeline-left-xl":"left"===l},this.props.className);return d.a.createElement("div",{className:s},d.a.createElement("div",{className:"rui-timeline-line"}),t)}}]),a}(m.Component);y.Item=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.icon,n=e.date,i=e.swap,r=O()("rui-timeline-item",{"rui-timeline-item-swap":i},this.props.className);return d.a.createElement("div",{className:r},a?d.a.createElement("div",{className:"rui-timeline-icon"},a):"",d.a.createElement("div",{className:"rui-timeline-content"},t),n?d.a.createElement("div",{className:"rui-timeline-date"},n):"")}}]),a}(m.Component);var T=y,k=a(22),C=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={activeTab:"timeline",data:{name:"",phone:"",email:"",cpf:"",profile:{name:""},sales:[],qtde_cancel:0,qtde_sales:0,fat_sales:0},timeline:[],loading:!1},n.toggleTab=n.toggleTab.bind(Object(c.a)(n)),n.loadData=n.loadData.bind(Object(c.a)(n)),n}return Object(s.a)(a,[{key:"toggleTab",value:function(e){this.setState({activeTab:e})}},{key:"loadData",value:function(){var e=Object(r.a)(i.a.mark((function e(){var t,a,n,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,h.a.get("crm/clients/".concat(t,"/details"));case 3:return a=e.sent,n=a.data,e.next=7,h.a.get("crm/clients/".concat(t,"/timeline"));case 7:r=e.sent,l=r.data,this.setState({data:n,timeline:l,id:t});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t=this.state.activeTab;return d.a.createElement(m.Fragment,null,d.a.createElement("div",{className:"rui-profile row vertical-gap"},d.a.createElement("div",{className:this.state.data.sales.length>0?"col-lg-6 col-xl-5":"col-lg-12 col-xl-12"},d.a.createElement("div",{className:"card"},d.a.createElement("div",{className:"card-body"},d.a.createElement("div",{className:"row vertical-gap"},d.a.createElement("div",{className:"col"},d.a.createElement("div",{className:"rui-profile-info"},d.a.createElement("h3",{className:"rui-profile-info-title h4"},this.state.data.name),d.a.createElement("small",{className:"text-grey-6 mt-2 mb-15"},this.state.data.cpf),d.a.createElement("a",{className:"rui-profile-info-mail",href:"mailto:".concat(this.state.data.email)},this.state.data.email),d.a.createElement("a",{className:"rui-profile-info-phone",href:"tel:".concat(this.state.data.phone)},this.state.data.phone)))),d.a.createElement("div",{className:"rui-profile-numbers"},d.a.createElement("div",{className:"row justify-content-center"},d.a.createElement("div",{className:"col"}),d.a.createElement("div",{className:"col-auto"},d.a.createElement("div",{className:"rui-profile-number text-center"},d.a.createElement("h4",{className:"rui-profile-number-title h2"},this.state.data.qtde_sales),d.a.createElement("small",{className:"text-grey-6"},"Atendimentos"))),d.a.createElement("div",{className:"col p-0"}),d.a.createElement("div",{className:"col-auto"},d.a.createElement("div",{className:"rui-profile-number text-center"},d.a.createElement("h4",{className:"rui-profile-number-title h2"},"R$ ",this.state.data.fat_sales.toLocaleString()),d.a.createElement("small",{className:"text-grey-6"},"Faturamento"))),d.a.createElement("div",{className:"col p-0"}),d.a.createElement("div",{className:"col-auto"},d.a.createElement("div",{className:"rui-profile-number text-center"},d.a.createElement("h4",{className:"rui-profile-number-title h2"},this.state.data.qtde_cancel),d.a.createElement("small",{className:"text-grey-6"},"Desist\xeancias"))),d.a.createElement("div",{className:"col"})))))),this.state.data.sales.length>0?d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"col-lg-6 col-xl-7"},d.a.createElement("div",{className:"card"},d.a.createElement("div",{className:"card-body"},d.a.createElement("div",{className:"d-flex align-items-center"},d.a.createElement("h2",{className:"card-title mnb-6 mr-auto"},"Os 3 \xdaltimos atendimentos")),d.a.createElement("ul",{className:"list-group list-group-flush rui-profile-task-list"},this.state.data.sales.map((function(e){var t,a;return d.a.createElement("li",{className:"list-group-item"},d.a.createElement("div",{className:"rui-task rui-task-".concat(e.state)},d.a.createElement("div",{className:"rui-task-icon"},d.a.createElement(N.a,{name:w(e.state)})),d.a.createElement("div",{className:"rui-task-content"},d.a.createElement(f.b,{className:"rui-task-title",target:"_blank",to:"/pdv/show/".concat(e.id)},e.title),d.a.createElement("small",{className:"rui-task-subtitle"},"Atendente:"," ",d.a.createElement("a",null,d.a.createElement("strong",null,null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.name))),d.a.createElement("small",{className:"rui-task-subtitle"},"Valor:"," ",d.a.createElement("a",null,d.a.createElement("strong",null,e.amount.toLocaleString()))),d.a.createElement("small",{className:"rui-task-subtitle"},"Em:"," ",d.a.createElement("a",null,d.a.createElement("strong",null,Object(p.a)(null!==(a=Object(b.a)(e.date))&&void 0!==a?a:"","dd'/'MM'/'yyyy' \xe0s 'HH':'mm")))),d.a.createElement("small",{className:"rui-task-subtitle"},"Situa\xe7\xe3o:"," ",d.a.createElement("a",null,d.a.createElement("strong",null,D(e.state)))))))}))))))):d.a.createElement(d.a.Fragment,null),d.a.createElement("div",{className:"col-12"},d.a.createElement(E.a,{sliding:!0},d.a.createElement(E.a.NavItem,{isActive:"timeline"===t,onClick:function(){return e.toggleTab("timeline")}},"Linha do tempo")),d.a.createElement(E.a.Content,{activeTab:t},d.a.createElement(E.a.Pane,{tabId:"timeline"},d.a.createElement(T,{lg:"left"},this.state.timeline.map((function(e,t){var a;return d.a.createElement(T.Item,{className:e.state,swap:t%2!==0,icon:d.a.createElement(N.a,{name:w(e.state)}),date:Object(p.a)(null!==(a=Object(b.a)(e.date))&&void 0!==a?a:"","dd'/'MM'/'yyyy' \xe0s 'HH':'mm"),key:e.id},d.a.createElement("h3",null,e.title),d.a.createElement("p",null,"Identificador: ",d.a.createElement("strong",null,e.id),d.a.createElement("br",null),"Situa\xe7\xe3o: ",d.a.createElement("strong",null,D(e.state)),d.a.createElement("br",null),"Tipo: ",d.a.createElement("strong",null,e.type)))}))))))))}}]),a}(m.Component);t.default=Object(v.b)((function(e){return{settings:e.settings,toasts:e.toasts}}),{addToast:k.e,removeToast:k.f})(Object(g.f)(C));function D(e){return"scheduled"===e?"Agendado":"canceled"===e?"Cancelado":"realized"===e?"Realizado/Atendido":"rescheduled"===e?"Reagendado":"closed"===e?"Realizado":"open"===e?"Aberto":"active"===e?"Ativo":"inactive"===e?"Inativo":void 0}function w(e){return"scheduled"===e?"calendar":"canceled"===e?"x-square":"realized"===e?"check-square":"rescheduled"===e?"copy":"open"===e?"award":"closed"===e?"check-square":"active"===e||"inactive"===e?"star":void 0}}}]);
//# sourceMappingURL=18.678328a7.chunk.js.map