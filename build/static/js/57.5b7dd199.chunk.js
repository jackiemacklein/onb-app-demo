(this["webpackJsonponb-app-demo.agenciaonside.com.br"]=this["webpackJsonponb-app-demo.agenciaonside.com.br"]||[]).push([[57],{237:function(e,a,t){"use strict";var i=t(246),n=t.n(i),s=t(18),r=t.n(s),l=n.a.create({baseURL:"https://onb-api-demo.agenciaonside.com.br"});l.interceptors.request.use((function(e){return e.headers.Authorization="bearer "+r.a.get("rui-auth-token"),e}),(function(e){Promise.reject(e)})),a.a=l},913:function(e,a,t){"use strict";t.r(a);var i=t(244),n=t.n(i),s=t(245),r=t(2),l=t(3),o=t(14),c=t(5),d=t(4),u=t(0),m=t.n(u),v=t(15),h=t.n(v),p=t(26),b=t(224),g=(t(11),t(67)),f=t(237),E=t(22),k=function(e){Object(c.a)(t,e);var a=Object(d.a)(t);function t(e){var i;return Object(r.a)(this,t),(i=a.call(this,e)).state={email:"tech@agenciaonside.com.br",emailError:"",password:"tech@@on@agencia@#2020",passwordError:"",loading:!1},i.checkEmail=i.checkEmail.bind(Object(o.a)(i)),i.checkPassword=i.checkPassword.bind(Object(o.a)(i)),i.maybeLogin=i.maybeLogin.bind(Object(o.a)(i)),i}return Object(l.a)(t,[{key:"checkEmail",value:function(){var e=this.state.email,a=e&&Object(g.b)(e);return this.setState({emailError:a?"":"Formato de email inv\xe1lido"}),!0}},{key:"checkPassword",value:function(){var e=this.state.password,a=e&&e.length>=3;return this.setState({passwordError:a?"":"A senha deve ter pelo menos 6 caracteres"}),a}},{key:"maybeLogin",value:function(){var e=Object(s.a)(n.a.mark((function e(){var a,t,i,s,r,l,o,c,d,u,m,v,h,p,b,g,E,k,w;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,t=a.updateAuth,a.updateSettings,!this.state.loading){e.next=3;break}return e.abrupt("return");case 3:if(i=!0,i=this.checkEmail()&&i,i=this.checkPassword()&&i){e.next=8;break}return e.abrupt("return");case 8:return this.setState({loading:!0}),e.prev=9,e.next=12,f.a.post("/sessions",{email:this.state.email,password:this.state.password});case 12:s=e.sent,(r=s.data)&&t({token:r.token,user_id:null===r||void 0===r||null===(l=r.user)||void 0===l?void 0:l.id,user_name:null===r||void 0===r||null===(o=r.user)||void 0===o?void 0:o.name,user_email:null===r||void 0===r||null===(c=r.user)||void 0===c?void 0:c.email,filial_id:null===r||void 0===r||null===(d=r.user)||void 0===d||null===(u=d.filial)||void 0===u?void 0:u.id,filial_name:null===r||void 0===r||null===(m=r.user)||void 0===m||null===(v=m.filial)||void 0===v?void 0:v.name,user_image_path:null===r||void 0===r||null===(h=r.user)||void 0===h?void 0:h.image_path,profile_id:null===r||void 0===r||null===(p=r.user)||void 0===p||null===(b=p.profile)||void 0===b?void 0:b.id,profile_name:null===r||void 0===r||null===(g=r.user)||void 0===g||null===(E=g.profile)||void 0===E?void 0:E.name,sales_cancel:null===r||void 0===r||null===(k=r.user)||void 0===k?void 0:k.sales_cancel}),e.next=26;break;case 17:if(e.prev=17,e.t0=e.catch(9),console.log(e.t0),401!==(null===e.t0||void 0===e.t0||null===(w=e.t0.response)||void 0===w?void 0:w.status)){e.next=25;break}return this.setState({loading:!1,passwordError:"Usu\xe1rio ou senha inv\xe1lidos"}),e.abrupt("return");case 25:this.setState({loading:!1,passwordError:"Erro desconhecido! Tente novamente"});case 26:case"end":return e.stop()}}),e,this,[[9,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.email,i=a.emailError,n=a.password,s=a.passwordError;return m.a.createElement(u.Fragment,null,m.a.createElement("div",{className:"bg-image"},m.a.createElement("div",{className:"bg-grey-1"})),m.a.createElement("div",{className:"form rui-sign-form rui-sign-form-cloud"},m.a.createElement("div",{className:"row vertical-gap sm-gap justify-content-center"},m.a.createElement("div",{className:"col-12"},m.a.createElement("h1",{className:"display-4 mb-10 text-center"},"Login")),m.a.createElement("div",{className:"col-12"},m.a.createElement("input",{type:"email",className:h()("form-control",{"is-invalid":i}),"aria-describedby":"emailHelp",placeholder:"Email",value:t,onChange:function(a){e.setState({email:a.target.value},i?e.checkEmail:function(){})},onBlur:this.checkEmail,disabled:this.state.loading}),i?m.a.createElement("div",{className:"invalid-feedback"},i):""),m.a.createElement("div",{className:"col-12"},m.a.createElement("input",{type:"password",className:h()("form-control",{"is-invalid":s}),placeholder:"Password",value:n,onChange:function(a){e.setState({password:a.target.value},s?e.checkPassword:function(){})},onBlur:this.checkPassword,disabled:this.state.loading}),s?m.a.createElement("div",{className:"invalid-feedback"},s):""),m.a.createElement("div",{className:"col-12"},m.a.createElement("button",{className:"btn btn-brand btn-block text-center",onClick:this.maybeLogin,disabled:this.state.loading},"Entrar",this.state.loading?m.a.createElement(b.a,null):""))))," ")}}]),t}(u.Component);a.default=Object(p.b)((function(e){return{auth:e.auth,settings:e.settings}}),{updateAuth:E.g,updateSettings:E.h})(k)}}]);
//# sourceMappingURL=57.5b7dd199.chunk.js.map