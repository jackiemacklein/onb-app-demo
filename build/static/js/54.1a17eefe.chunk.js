(this["webpackJsonponb-app-demo.agenciaonside.com.br"]=this["webpackJsonponb-app-demo.agenciaonside.com.br"]||[]).push([[54],{234:function(e,t,a){"use strict";var n=a(241),i=a.n(n),s=a(18),c=a.n(s),l=i.a.create({baseURL:"https://onb-api-demo.agenciaonside.com.br"});l.interceptors.request.use((function(e){return e.headers.Authorization="bearer "+c.a.get("rui-auth-token"),e}),(function(e){Promise.reject(e)})),t.a=l},640:function(e,t,a){"use strict";a.r(t);var n=a(21),i=a(239),s=a.n(i),c=a(240),l=a(2),o=a(3),r=a(14),d=a(5),u=a(4),m=a(0),h=a.n(m),p=a(26),_=a(19),g=a(90),A=a(227),E=a(228),C=a(276),v=a(368),f=a(641),k=a(369),S=a(370),y=a(371),b=a(246),I=a(247),B=a(271),Q=a(269),O=a(270),w=a(372),N=a(11),J=a(234),x=a(679),j=a(639),D=a(22),L=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={modalNewClientOpen:!1,modalEditOpen:!1,modalPaymentOpen:!1,inputValue:"",data:{},payment_methods:[],updateValues:!1,cancelPassword:"",canceling:!1,paying:!1,payment_method_text:"",payment_method_id:"",coupon:"",item_edit_id:"",item_edit_name:"",item_edit_count:"",item_edit_stock:"",item_edit_value:"",item_edit_discount_amount:"",item_edit_discount_percentage:"",item_edit_maximum_discount:0,item_edit_amount:"",item_edit_type:"",client_id:{},client_name:"",client_phone:"",client_cpf:"",client_email:"",loading:!1},n.loadData=n.loadData.bind(Object(r.a)(n)),n.loadPaymentMethods=n.loadPaymentMethods.bind(Object(r.a)(n)),n.getState=n.getState.bind(Object(r.a)(n)),n.getColor=n.getColor.bind(Object(r.a)(n)),n.handleAddProduct=n.handleAddProduct.bind(Object(r.a)(n)),n.handleAddService=n.handleAddService.bind(Object(r.a)(n)),n.handleCancelSaleCart=n.handleCancelSaleCart.bind(Object(r.a)(n)),n.toggleModalCancelOpen=n.toggleModalCancelOpen.bind(Object(r.a)(n)),n.toggleModalPaymentOpen=n.toggleModalPaymentOpen.bind(Object(r.a)(n)),n.toggleModalEditOpen=n.toggleModalEditOpen.bind(Object(r.a)(n)),n.handlePay=n.handlePay.bind(Object(r.a)(n)),n.handleCloseSaleCart=n.handleCloseSaleCart.bind(Object(r.a)(n)),n.handleChangeCountItem=n.handleChangeCountItem.bind(Object(r.a)(n)),n.handleEditProductInSale=n.handleEditProductInSale.bind(Object(r.a)(n)),n.handleRecalcValuesItem=n.handleRecalcValuesItem.bind(Object(r.a)(n)),n.handleCalcDiscountByAmount=n.handleCalcDiscountByAmount.bind(Object(r.a)(n)),n.handleCalcDiscountByPercent=n.handleCalcDiscountByPercent.bind(Object(r.a)(n)),n.handleEditSaleCart=n.handleEditSaleCart.bind(Object(r.a)(n)),n.handleEditServiceInSale=n.handleEditServiceInSale.bind(Object(r.a)(n)),n.handleDeleteItemCart=n.handleDeleteItemCart.bind(Object(r.a)(n)),n.filterClient=n.filterClient.bind(Object(r.a)(n)),n.loadClients=n.loadClients.bind(Object(r.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(r.a)(n)),n.toggleModalNewClientOpen=n.toggleModalNewClientOpen.bind(Object(r.a)(n)),n.handleSaveNewClient=n.handleSaveNewClient.bind(Object(r.a)(n)),n}return Object(o.a)(a,[{key:"toggleModalNewClientOpen",value:function(){this.setState((function(e){return{modalNewClientOpen:!e.modalNewClientOpen,client_name:"",client_cpf:"",client_phone:""}}))}},{key:"loadData",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.prev=1,e.next=4,J.a.get("/sales/".concat(t));case 4:a=e.sent,n=a.data,this.setState({data:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"filterClient",value:function(){var e=Object(c.a)(s.a.mark((function e(t,a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.addToast,""==t){e.next=11;break}if(!(t.length>=2)){e.next=10;break}return e.t0=a,e.next=6,this.loadClients(t);case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 10:n({title:"Aten\xe7\xe3o!",content:"Digite ao menos 2 letras para pesquisar",time:new Date,duration:5e3,color:"warning"});case 11:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"loadClients",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var a,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.addToast,e.prev=1,e.next=4,J.a.get("/crm/clients/?term=".concat(t));case 4:return n=e.sent,i=n.data,e.abrupt("return",i.map((function(e){return{value:e.id,label:"".concat(e.cpf?"[".concat(e.cpf,"] - "):e.phone?"[".concat(e.phone,"] - "):"").concat(e.name)}})));case 9:e.prev=9,e.t0=e.catch(1),a({title:"Erro!",content:"Ocorreu um erro ao buscar cliente",time:new Date,duration:12e3,color:"danger"}),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleInputChange",value:function(e){var t=e;return this.setState({inputValue:t}),t}},{key:"loadPaymentMethods",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.a.get("/payment_methods/");case 3:t=e.sent,a=t.data,this.setState({payment_methods:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleAddProduct",value:function(e){var t=this.state.data.additionals.products.find((function(t){return t.id===e}));if(t)if(t.stock<=0)alert("Estoque indispon\xedvel");else{var a=1;this.state.data.products.find((function(t){return t.product_id===e}))?this.state.data.products.map((function(t){t.product_id===e&&(t.count=t.count+1,t.discount_amount?t.amount=(t.unit_value-t.discount_amount)*t.count:t.amount=t.unit_value*t.count,a=t.count)})):this.state.data.products.push({amount:t.sale_price,count:1,discount_amount:null,discount_percentage:null,product_id:t.id,sale_id:this.state.data.id,unit_value:t.sale_price,product:t}),this.state.data.additionals.products.map((function(t){t.virtual_stock||(t.virtual_stock=t.stock),t.id===e&&(t.stock=t.virtual_stock-a)})),this.setState({data:this.state.data}),this.setState({updateValues:!this.state.updateValues})}else alert("Erro desconhecido")}},{key:"handleAddService",value:function(e){var t=this.state.data.additionals.services.find((function(t){return t.id===e}));if(t){this.state.data.services.find((function(t){return t.service_id===e}))?this.state.data.services.map((function(t){t.service_id===e&&(t.count=t.count+1,t.discount_amount?t.amount=(t.unit_value-t.discount_amount)*t.count:t.amount=t.unit_value*t.count,t.count)})):this.state.data.services.push({amount:t.value.price,count:1,discount_amount:null,discount_percentage:null,service_id:t.id,sale_id:this.state.data.id,unit_value:t.value.price,service:t}),this.setState({data:this.state.data}),this.setState({updateValues:!this.state.updateValues})}else alert("Erro desconhecido")}},{key:"handleCancelSaleCart",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.addToast,n=t.history,this.state.cancelPassword){e.next=5;break}return this.toggleModalCancelOpen(),a({title:"Digite a Senha",content:"Por favor, informe sua senha de acesso.",time:new Date,duration:12e3,color:"warning"}),e.abrupt("return",!1);case 5:return this.setState({canceling:!0}),e.prev=6,e.next=9,J.a.post("/sale/cancel/".concat(this.state.data.id),{password:this.state.cancelPassword});case 9:a({title:"Sucesso!",content:"Venda/Servi\xe7o Cancelada(o) com sucesso.",time:new Date,duration:12e3,color:"success"}),n.push("/pdv/app"),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(6),e.t0.response?e.t0.response.status&&401==e.t0.response.status&&a({title:"Acesso Negado!",content:"Desculpe, n\xe3o foi possivel cancelar a(o) venda/servico!",time:new Date,duration:12e3,color:"warning"}):a({title:"Erro desconhecido!",content:"Desculpe, Tente novamente",time:new Date,duration:12e3,color:"error"}),this.setState({cancelPassword:"",canceling:!1}),this.toggleModalCancelOpen();case 18:case"end":return e.stop()}}),e,this,[[6,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleCloseSaleCart",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,a,n,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,n=a.addToast,i=a.history,!((c={client_id:null!==(t=this.state.client_id.value)&&void 0!==t?t:"",value:this.state.data.amount,amount:this.state.data.amount,discount_amount:this.state.data.discount_amount,discount_percentage:this.state.data.discount_percentage,origin:this.state.data.origin,payment_method_id:this.state.payment_method_id,state:"closed",coupon:this.state.coupon,services:this.state.data.services.filter((function(e){return e.count>0})),products:this.state.data.products.filter((function(e){return e.count>0}))}).services.length>0||c.products.length>0)){e.next=18;break}return this.setState({paying:!0}),e.prev=4,e.next=7,J.a.put("/sales/".concat(this.state.data.id),c);case 7:n({title:"Pagamento Realizado",content:"O Pagamento foi realizado com sucesso",time:new Date,duration:12e3,color:"success"}),i.push("/pdv/app"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0),n({title:"Erro!",content:"Tente novamente, erro ao efetuar pagamento",time:new Date,duration:15e3,color:"error"});case 15:this.setState({paying:!1,coupon:""}),e.next=21;break;case 18:return this.toggleModalPaymentOpen(),n({title:"Carrinho Vazio",content:"Por favor, adicione ao menos um servi\xe7o ou produto para eftuar o Pagamento.",time:new Date,duration:12e3,color:"warning"}),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"handlePay",value:function(){var e=Object(c.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({payment_method_text:a,payment_method_id:t}),this.toggleModalPaymentOpen();case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleChangeCountItem",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var a,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=parseInt(t))>0?t>this.state.item_edit_stock?(this.setState({item_edit_count:this.state.item_edit_stock}),alert("".concat(this.state.item_edit_stock," \xe9 quantidade m\xe1xima em estoque")),a=(this.state.item_edit_value-this.state.item_edit_discount_amount)*this.state.item_edit_stock,this.setState({item_edit_amount:a})):(n=(this.state.item_edit_value-this.state.item_edit_discount_amount)*t,this.setState({item_edit_amount:n,item_edit_count:t})):(this.setState({item_edit_count:1}),i=1*(this.state.item_edit_value-this.state.item_edit_discount_amount),this.setState({item_edit_amount:i}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleRecalcValuesItem",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.item_edit_count>0?this.state.item_edit_count>this.state.item_edit_stock?(this.setState({item_edit_count:this.state.item_edit_stock}),alert("".concat(this.state.item_edit_stock," \xe9 quantidade m\xe1xima em estoque")),t=(this.state.item_edit_value-this.state.item_edit_discount_amount)*this.state.item_edit_stock,this.setState({item_edit_amount:t})):(a=(this.state.item_edit_value-this.state.item_edit_discount_amount)*this.state.item_edit_count,this.setState({item_edit_amount:a,item_edit_count:this.state.item_edit_count})):(this.setState({item_edit_count:1}),n=1*(this.state.item_edit_value-this.state.item_edit_discount_amount),this.setState({item_edit_amount:n}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleEditProductInSale",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({item_edit_type:"products"}),this.state.data.products.map((function(e){if(e.product_id===t){var n,i,s,c,l=a.state.data.additionals.products.find((function(t){return t.id===e.product_id}));l.virtual_stock?l.virtual_stock=l.virtual_stock:l.virtual_stock=l.stock-e.count,a.setState({item_edit_id:e.product_id}),a.setState({item_edit_name:"".concat(e.product.name," (R$ ").concat(null===(n=e.unit_value)||void 0===n?void 0:n.toLocaleString(),")")}),a.setState({item_edit_count:e.count}),a.setState({item_edit_stock:l.virtual_stock}),a.setState({item_edit_value:e.unit_value}),a.setState({item_edit_discount_amount:null!==(i=e.discount_amount)&&void 0!==i?i:0}),a.setState({item_edit_discount_percentage:null!==(s=e.discount_percentage)&&void 0!==s?s:0}),a.setState({item_edit_maximum_discount:null!==(c=e.product.maximum_discount)&&void 0!==c?c:0}),a.setState({item_edit_amount:e.amount})}})),this.toggleModalEditOpen();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleEditServiceInSale",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({item_edit_type:"services"}),this.state.data.services.map((function(e){var n,i,s;e.service_id===t&&(a.setState({item_edit_id:e.service_id}),a.setState({item_edit_name:"".concat(e.service.name," (R$ ").concat(null===(n=e.unit_value)||void 0===n?void 0:n.toLocaleString(),")")}),a.setState({item_edit_count:e.count}),a.setState({item_edit_stock:1e7}),a.setState({item_edit_value:e.unit_value}),a.setState({item_edit_discount_amount:null!==(i=e.discount_amount)&&void 0!==i?i:0}),a.setState({item_edit_discount_percentage:null!==(s=e.discount_percentage)&&void 0!==s?s:0}),a.setState({item_edit_maximum_discount:100}),a.setState({item_edit_amount:e.amount}))})),this.toggleModalEditOpen();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCalcDiscountByAmount",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=100*parseFloat(t)/this.state.item_edit_value,this.setState({item_edit_discount_percentage:a,item_edit_discount_amount:t}),this.handleRecalcValuesItem();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCalcDiscountByPercent",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t/100*this.state.item_edit_value,e.next=3,this.setState({item_edit_discount_amount:a,item_edit_discount_percentage:t});case 3:this.handleRecalcValuesItem();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleEditSaleCart",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===this.state.item_edit_maximum_discount&&this.state.item_edit_discount_percentage>0?(alert("N\xe3o \xe9 permitido aplicar descontos nesse produto"),this.handleCalcDiscountByPercent(0)):this.state.item_edit_discount_percentage>this.state.item_edit_maximum_discount?(alert("A porcentagem m\xe1xima de desconto \xe9 de: ".concat(null===(t=this.state.item_edit_maximum_discount)||void 0===t?void 0:t.toLocaleString(),"%")),this.setState({item_edit_discount_percentage:this.state.item_edit_maximum_discount}),this.handleCalcDiscountByPercent(this.state.item_edit_maximum_discount)):("products"===this.state.item_edit_type?(this.state.data.products.map((function(e,t){if(e.product_id===a.state.item_edit_id){var i=a.state.data.additionals.products.find((function(t){return t.id===e.product_id}));i=i.virtual_stock?i.virtual_stock:i.stock,a.state.data.products[t]=Object(n.a)(Object(n.a)({},e),{},{count:a.state.item_edit_count,amount:a.state.item_edit_amount,discount_amount:a.state.item_edit_discount_amount,discount_percentage:a.state.item_edit_discount_percentage,stock:i-a.state.item_edit_count})}})),this.state.data.additionals.products.map((function(e){e.virtual_stock||(e.virtual_stock=e.stock),e.id===a.state.item_edit_id&&(e.stock=e.virtual_stock-a.state.item_edit_count)})),this.setState({data:this.state.data})):"services"===this.state.item_edit_type&&this.state.data.services.map((function(e,t){e.service_id===a.state.item_edit_id&&(a.state.data.services[t]=Object(n.a)(Object(n.a)({},e),{},{count:a.state.item_edit_count,amount:a.state.item_edit_amount,discount_amount:a.state.item_edit_discount_amount,discount_percentage:a.state.item_edit_discount_percentage})),a.setState({data:a.state.data})})),this.setState({updateValues:!this.state.updateValues}),this.toggleModalEditOpen());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleDeleteItemCart",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,a,n,i=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.addToast,"products"===this.state.item_edit_type?(this.state.data.additionals.products.map((function(e){e.virtual_stock||(e.virtual_stock=e.stock),e.id===i.state.item_edit_id&&(e.stock=e.virtual_stock)})),a=this.state.data.products.filter((function(e){return e.product_id!==i.state.item_edit_id})),this.state.data.products=a,this.setState({data:this.state.data})):"services"===this.state.item_edit_type&&(n=this.state.data.services.filter((function(e){return e.service_id!==i.state.item_edit_id})),this.state.data.services=n,this.setState({data:this.state.data})),t({title:"Sucesso",content:"O item foi removido com sucesso",time:new Date,duration:12e3,color:"success"}),this.toggleModalEditOpen(),this.setState({updateValues:!this.state.updateValues});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSaveNewClient",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var a,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.props.addToast,this.state.client_name){e.next=5;break}return alert("Informe o nome do Cliente"),e.abrupt("return",!1);case 5:return this.setState({loading:!0}),e.prev=6,e.next=9,J.a.post("/crm/clients",{profile_id:5,cpf:this.state.client_cpf,name:null!==(a=this.state.client_name)&&void 0!==a?a:"-",phone:this.state.client_phone,email:this.state.client_email,is_active:!0});case 9:n=e.sent,(i=n.data)&&this.setState({client_id:{value:i.id,label:"".concat(i.cpf?"[".concat(i.cpf,"] - "):i.phone?"[".concat(i.phone,"] - "):"").concat(i.name)}}),this.toggleModalNewClientOpen(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),e.t0.response?(e.t0.response.data&&!0===e.t0.response.data.error&&alert(e.t0.response.data.more),e.t0.response.data.data?this.setState({client_id:{value:e.t0.response.data.data.id,label:"".concat(e.t0.response.data.data.cpf?"[".concat(e.t0.response.data.data.cpf,"] - "):e.t0.response.data.data.phone?"[".concat(e.t0.response.data.data.phone,"] - "):"").concat(e.t0.response.data.data.name)}}):alert("Desculpe, n\xe3o foi possivel salvar o cliente")):alert("Desculpe, n\xe3o foi possivel salvar o cliente"),console.log(e.t0);case 19:this.setState({loading:!1});case 20:case"end":return e.stop()}}),e,this,[[6,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getState",value:function(e){switch(e){case"open":return"Aberta";case"closed":return"Fechada";case"canceled":return"Cancelada"}}},{key:"getColor",value:function(e){switch(e){case"open":return"warning";case"closed":return"success";case"canceled":return"danger"}}},{key:"toggleModalCancelOpen",value:function(){this.setState((function(e){return{modalCancelOpen:!e.modalCancelOpen}}))}},{key:"toggleModalPaymentOpen",value:function(){this.setState((function(e){return{modalPaymentOpen:!e.modalPaymentOpen}}))}},{key:"toggleModalEditOpen",value:function(){this.setState((function(e){return{modalEditOpen:!e.modalEditOpen}}))}},{key:"componentDidMount",value:function(){this.loadData(),this.loadPaymentMethods()}},{key:"componentDidUpdate",value:function(e,t){var a=0;t.updateValues!==this.state.updateValues&&(this.state.data.products.map((function(e){e.count>0&&(a+=e.amount)})),this.state.data.services.map((function(e){e.count>0&&(a+=e.amount)})),this.setState({data:Object(n.a)(Object(n.a)({},this.state.data),{},{amount:a})}))}},{key:"render",value:function(){var e,t,a,i,s,c,l,o,r,d,u,p,_,J,D=this,L={control:function(e,t){return Object(n.a)(Object(n.a)({},e),{},{borderColor:t.isFocused?"rgba(114, 94, 195, 0.6)":"#eaecf0","&:hover":{borderColor:t.isFocused?"rgba(114, 94, 195, 0.6)":"#eaecf0"},boxShadow:t.isFocused?"0 0 0 0.2rem rgba(114, 94, 195, 0.2)":""})},option:function(e,t){var a="";return t.isSelected?a="#725ec3":t.isFocused&&(a="rgba(114, 94, 195, 0.2)"),Object(n.a)(Object(n.a)({},e),{},{backgroundColor:a})},multiValueLabel:function(e){return Object(n.a)(Object(n.a)({},e),{},{color:"#545b61",backgroundColor:"#eeeeef"})}};return h.a.createElement(m.Fragment,null,h.a.createElement("div",{className:"row vertical-gap"},h.a.createElement("div",{className:"col-lg-4 order-lg-12 rui-task-sidebar order-1"},h.a.createElement("div",{className:"card card-border-effect-kie"},h.a.createElement("div",{className:"card-body py-30"},h.a.createElement("ul",{className:"list-group list-group-flush rui-task-sidebar-list"},h.a.createElement("li",{className:"list-group-item"},h.a.createElement("ul",{className:"list-unstyled rui-task-info-list"},null===(e=this.state.data)||void 0===e||null===(t=e.services)||void 0===t?void 0:t.map((function(e){return h.a.createElement("li",{key:e.id},h.a.createElement("div",{className:"rui-task-info-item"},h.a.createElement(N.a,{name:"edit",className:"mr-5",onClick:function(){return D.handleEditServiceInSale(e.service.id)}}),h.a.createElement("span",null,h.a.createElement("strong",null,"x",e.count)," -"),h.a.createElement("span",{className:"list-items-sale"},e.service.name),h.a.createElement("h6",{className:"h6 rui-task-sidebar-title text-right mb-0 mt-0"},h.a.createElement("strong",null,"R$ ",e.amount.toLocaleString()))))})),null===(a=this.state.data)||void 0===a||null===(i=a.products)||void 0===i?void 0:i.map((function(e){return h.a.createElement("li",{key:e.product.id},h.a.createElement("div",{className:"rui-task-info-item"},h.a.createElement(N.a,{name:"edit",className:"mr-5",onClick:function(){return D.handleEditProductInSale(e.product.id)}}),h.a.createElement("span",null,h.a.createElement("strong",null,"x",e.count)," -"),h.a.createElement("span",{className:"list-items-sale"},e.product.name),h.a.createElement("h6",{className:"h6 rui-task-sidebar-title text-right mb-0 mt-0"},h.a.createElement("strong",null,"R$ ",e.amount.toLocaleString()))))})))),h.a.createElement("li",{className:"list-group-item"},h.a.createElement("h5",{className:"h4 rui-task-sidebar-title text-right mb-0 mt-0"},h.a.createElement("strong",null,"R$ ",null===(s=this.state.data)||void 0===s||null===(c=s.amount)||void 0===c?void 0:c.toLocaleString()))),h.a.createElement("li",{className:"list-group-item"},h.a.createElement("h5",{className:"h4 rui-task-sidebar-title"},"Forma de Pagamento"),h.a.createElement("ul",{className:"list-unstyled rui-task-project-list payment-types"},this.state.payment_methods.map((function(e){return h.a.createElement("li",{key:e.id,className:"payment-type"},h.a.createElement(g.a,{block:!0,className:"btn-hover-outline text-center",color:e.color,onClick:function(){return D.handlePay(e.id,e.name)}},e.name))})),h.a.createElement("li",{className:"payment-type",style:{flex:1}},h.a.createElement(g.a,{block:!0,className:"btn-hover-outline text-center",color:"light",onClick:this.toggleModalCancelOpen},"Cancelar")))))))),h.a.createElement("div",{className:"col-lg-8 order-lg-0 order-0"},h.a.createElement("div",{className:"bill-filters"},h.a.createElement(A.a,null,h.a.createElement(E.a,{xs:12,sm:8,md:8,className:"mb-5"},h.a.createElement(C.a,{for:"filter_type"},"DIGITE P/ PESQUISAR O CLIENTE"),h.a.createElement(w.a,{cacheOptions:!0,loadOptions:this.filterClient,defaultOptions:!0,onInputChange:this.handleInputChange,id:"filter_type",name:"filter_type",styles:L,defaultValue:this.state.client_id,value:this.state.client_id,onChange:function(e){return D.setState({client_id:e})}})),h.a.createElement(E.a,{className:"mb-5"},h.a.createElement(C.a,{for:"filter_type"},"N\xc3O LOCALIZOU?"),h.a.createElement(g.a,{xs:12,sm:2,md:2,block:!0,className:"btn-hover-outline text-center",color:"brand",onClick:function(){return D.toggleModalNewClientOpen()}},"NOVO CLIENTE")))),h.a.createElement("div",{className:"rui-task-comment p-0"},h.a.createElement("div",{className:"rui-task-comment-text mt-0"},h.a.createElement(A.a,{className:"xs-gap p-0 flex-wrap"},null===(l=this.state.data)||void 0===l||null===(o=l.additionals)||void 0===o?void 0:o.products.map((function(e){return h.a.createElement(E.a,{xs:12,sm:12,md:6,lg:4,className:"mb-10",key:e.id},h.a.createElement(v.a,null,h.a.createElement(f.a,{alt:"",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAADICAYAAACZBDirAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKNSURBVHgB7dQBEQAQAAAx9O/nnDAE+S3E5j73DYCgNQCiBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBrA+NWgUa6x769AAAAABJRU5ErkJggg==",top:!0}),h.a.createElement(k.a,{className:"card-body pt-10 pb-10 pl-15 pr-15"},h.a.createElement(S.a,{className:"h2"},e.name),h.a.createElement(y.a,null,"R$ ",e.sale_price.toLocaleString()," ",h.a.createElement("mark",null,e.stock)),h.a.createElement(g.a,{color:"brand",onClick:function(){return D.handleAddProduct(e.id)}},"Adicionar"))))})),null===(r=this.state.data)||void 0===r||null===(d=r.additionals)||void 0===d?void 0:d.services.map((function(e){return h.a.createElement(E.a,{xs:12,sm:12,md:6,lg:4,className:"mb-10",key:e.id},h.a.createElement(v.a,null,h.a.createElement(f.a,{alt:"",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAADICAYAAACZBDirAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKNSURBVHgB7dQBEQAQAAAx9O/nnDAE+S3E5j73DYCgNQCiBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBrA+NWgUa6x769AAAAABJRU5ErkJggg==",top:!0}),h.a.createElement(k.a,{className:"card-body pt-10 pb-10 pl-15 pr-15"},h.a.createElement(S.a,{className:"h2"},e.name),h.a.createElement(y.a,null,"R$ ",e.value.price.toLocaleString()),h.a.createElement(g.a,{color:"brand",onClick:function(){return D.handleAddService(e.id)}},"Adicionar"))))}))))),h.a.createElement("div",{className:"rui-task-comment"},h.a.createElement("div",{className:"media media-show"},h.a.createElement("div",{className:"rui-task-status rui-task-status-".concat(this.getColor(this.state.data.state))},h.a.createElement("div",{className:"row vertical-gap align-items-center sm-gap"},h.a.createElement("div",{className:"col-auto"},h.a.createElement("div",{className:"rui-task-status-item"},h.a.createElement("div",{className:"rui-task-status-item-icon"},h.a.createElement(N.a,{name:"check-circle"})),this.getState(this.state.data.state)," em ",this.state.data.date?Object(x.a)(Object(j.a)(this.state.data.date),"dd'/'MM'/'yyyy HH':'mm"):"")))),h.a.createElement("span",{className:"media-link"},h.a.createElement("span",{className:"media-body"},h.a.createElement("span",{className:"media-title"},"Aberto por: ",null===(u=this.state.data)||void 0===u||null===(p=u.user)||void 0===p?void 0:p.name),h.a.createElement("small",{className:"media-title"},"Cliente: ",this.state.data.client_name))))))),h.a.createElement(B.a,{isOpen:this.state.modalCancelOpen,toggle:this.toggleModalCancelOpen,className:this.props.className,fade:!0},h.a.createElement("div",{className:"modal-header"},h.a.createElement("h5",{className:"modal-title h2"},"Cancelar Venda/Servi\xe7o"),h.a.createElement(g.a,{className:"close",color:"",onClick:this.toggleModalCancelOpen},h.a.createElement(N.a,{name:"x"}))),h.a.createElement(Q.a,null,"Tem Certeza que deseja cancelar a venda #",this.state.data.id,"?",h.a.createElement("br",null),h.a.createElement(b.a,null,h.a.createElement(C.a,{for:"password"},"Senha"),h.a.createElement(I.a,{id:"password",name:"password",placeholder:"***",type:"password",value:this.state.cancelPassword,onChange:function(e){return D.setState({cancelPassword:e.target.value})}}))),h.a.createElement(O.a,null,h.a.createElement(g.a,{color:"secondary",onClick:this.toggleModalCancelOpen},"Fechar")," ",h.a.createElement(g.a,{color:"brand",onClick:this.handleCancelSaleCart,disabled:this.state.canceling},this.state.canceling?"Cancelando...":"Cancelar"))),h.a.createElement(B.a,{isOpen:this.state.modalPaymentOpen,toggle:this.toggleModalPaymentOpen,className:this.props.className,fade:!0},h.a.createElement("div",{className:"modal-header"},h.a.createElement("h5",{className:"modal-title h2"},"Confirma\xe7\xe3o de Pagamento"),h.a.createElement(g.a,{className:"close",color:"",onClick:this.toggleModalPaymentOpen},h.a.createElement(N.a,{name:"x"}))),h.a.createElement(Q.a,null,"Confirma o pagamento no ",h.a.createElement("mark",{className:"display-4"},this.state.payment_method_text)," no valor de R$"," ",h.a.createElement("mark",{className:"display-4"},null===(_=this.state.data)||void 0===_||null===(J=_.amount)||void 0===J?void 0:J.toLocaleString())," ?",h.a.createElement("br",null),h.a.createElement("br",null),h.a.createElement(b.a,null,h.a.createElement(C.a,{for:"coupon"},"Cupom Fiscal"),h.a.createElement(I.a,{id:"coupon",name:"coupon",placeholder:"45654566",type:"text",value:this.state.coupon,onChange:function(e){return D.setState({coupon:e.target.value})}}))),h.a.createElement(O.a,null,h.a.createElement(g.a,{color:"secondary",onClick:this.toggleModalPaymentOpen},"Fechar")," ",h.a.createElement(g.a,{color:"success",onClick:this.handleCloseSaleCart,disabled:this.state.paying},this.state.paying?"Efetuando Pagamento...":"Confirmar"))),h.a.createElement(B.a,{isOpen:this.state.modalEditOpen,toggle:this.toggleModalEditOpen,className:this.props.className,fade:!0},h.a.createElement("div",{className:"modal-header"},h.a.createElement("h5",{className:"modal-title h2"},"Editar Item"),h.a.createElement(g.a,{className:"close",color:"",onClick:this.toggleModalEditOpen},h.a.createElement(N.a,{name:"x"}))),h.a.createElement(Q.a,null,"Editar item ",h.a.createElement("mark",{className:"display-4"},this.state.item_edit_name),h.a.createElement("br",null),h.a.createElement("br",null),h.a.createElement(b.a,null,h.a.createElement(C.a,{for:"count"},"Quantidade"),h.a.createElement(I.a,{id:"count",name:"count",placeholder:"count",type:"number",min:1,max:this.state.item_edit_stock,value:this.state.item_edit_count,onChange:function(e){return D.handleChangeCountItem(e.target.value)},onKeyUp:function(e){return D.handleChangeCountItem(e.target.value)}})),h.a.createElement(b.a,null,h.a.createElement(C.a,{for:"discount_amount"},"R$ de Desconto"),h.a.createElement(I.a,{id:"discount_amount",name:"discount_amount",placeholder:"0,00",type:"text",value:this.state.item_edit_discount_amount,onChange:function(e){return D.handleCalcDiscountByAmount(e.target.value)},onKeyUp:function(e){return D.handleCalcDiscountByAmount(e.target.value)}})),h.a.createElement(b.a,null,h.a.createElement(C.a,{for:"item_edit_discount_percentage"},"% de Desconto"),h.a.createElement(I.a,{id:"item_edit_discount_percentage",name:"item_edit_discount_percentage",placeholder:"0,00",type:"text",value:this.state.item_edit_discount_percentage,onChange:function(e){return D.handleCalcDiscountByPercent(e.target.value)},onKeyUp:function(e){return D.handleCalcDiscountByPercent(e.target.value)}})),h.a.createElement(b.a,null,h.a.createElement(C.a,{for:"item_edit_amount"},"R$ Total"),h.a.createElement(I.a,{id:"item_edit_amount",name:"item_edit_amount",placeholder:"0,00",type:"text",value:this.state.item_edit_amount}))),h.a.createElement(O.a,null,h.a.createElement(g.a,{color:"secondary",onClick:this.toggleModalEditOpen},"Fechar")," ",h.a.createElement(g.a,{color:"danger",onClick:this.handleDeleteItemCart},"Excluir da Venda")," ",h.a.createElement(g.a,{color:"success",onClick:this.handleEditSaleCart},"Alterar"))),h.a.createElement(B.a,{isOpen:this.state.modalNewClientOpen,toggle:this.toggleModalNewClientOpen,className:this.props.className,fade:!0},h.a.createElement("form",{onSubmit:this.handleSaveNewClient},h.a.createElement("div",{className:"modal-header"},h.a.createElement("h5",{className:"modal-title h2"},"Novo Cliente"),h.a.createElement(g.a,{className:"close",color:"",onClick:this.toggleModalNewClientOpen},h.a.createElement(N.a,{name:"x"}))),h.a.createElement(Q.a,null,h.a.createElement(b.a,null,h.a.createElement(C.a,{for:"client_name"},"Nome *"),h.a.createElement(I.a,{required:!0,id:"client_name",name:"client_name",placeholder:"Nome Completo",type:"text",value:this.state.client_name,onChange:function(e){return D.setState({client_name:e.target.value})}})),h.a.createElement(b.a,null,h.a.createElement(C.a,{for:"client_cpf"},"CPF"),h.a.createElement(I.a,{id:"client_cpf",name:"client_cpf",placeholder:"",type:"text",value:this.state.client_cpf,onChange:function(e){return D.setState({client_cpf:e.target.value})}})),h.a.createElement(b.a,null,h.a.createElement(C.a,{for:"client_phone"},"Telefone"),h.a.createElement(I.a,{id:"client_phone",name:"client_phone",placeholder:"(99) 9 9999-9999",type:"text",value:this.state.client_phone,onChange:function(e){return D.setState({client_phone:e.target.value})}})),h.a.createElement(b.a,null,h.a.createElement(C.a,{for:"client_email"},"E-mail"),h.a.createElement(I.a,{id:"client_email",name:"client_email",placeholder:"",type:"email",value:this.state.client_email,onChange:function(e){return D.setState({client_email:e.target.value})}}))),h.a.createElement(O.a,null,h.a.createElement(g.a,{color:"secondary",type:"button",onClick:this.toggleModalNewClientOpen},"Cancelar")," ",h.a.createElement(g.a,{color:"success",disabled:this.state.loading},this.state.loading?"Salvando...":"Salvar")))))}}]),a}(m.Component);t.default=Object(p.b)((function(e){return{settings:e.settings,toasts:e.toasts}}),{addToast:D.e})(Object(_.f)(L))}}]);
//# sourceMappingURL=54.1a17eefe.chunk.js.map